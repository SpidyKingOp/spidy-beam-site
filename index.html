<script>
  async function shortenUrl() {
    const url = document.getElementById("urlInput").value;
    const result = document.getElementById("result");

    if (!url || !url.startsWith("http")) {
      result.textContent = "‚ùå Please enter a valid URL that starts with http or https.";
      result.style.color = "red";
      return;
    }

    result.textContent = "‚è≥ Shortening...";

    try {
      const res = await fetch(`https://is.gd/create.php?format=simple&url=${encodeURIComponent(url)}`);
      const shortUrl = await res.text();

      if (shortUrl.startsWith("Error")) {
        result.textContent = "‚ö†Ô∏è is.gd didn't like the URL. Try another one.";
        result.style.color = "orange";
        return;
      }

      result.innerHTML = `‚úÖ Shortened: <a href="${shortUrl}" target="_blank" class="underline text-green-400">${shortUrl}</a>`;
      result.style.color = "green";
    } catch (err) {
      result.textContent = "üí• Something broke while shortening. Try again later.";
      result.style.color = "red";
    }
  }
</script>
